import{r as A,k as $,l as L,d as j,n as J,a as D,o as b,u as f,p as q,e as y,F as V,q as G,s as B,t as Q,h as U,i as W,v as ee,j as E,x as ne,y as z,c as te,z as oe}from"./index-oFsge7CF.js";const se=Array.isArray;function ae(e,n){if(Z(e))return"multiple";const[i]=e;return i?.[n.children]?"cascade":"single"}function le(e){return{children:e?.children||"children",label:e?.label||"label",value:e?.value||"value"}}function re(e,n,i){if(Z(e))return[];const o=[];let t=e,s=0;for(;t;){const g=n[s];let a=K(t,g,i);a===-1&&(a=0),o.push(t),s+=1,t=t[a]?.[i.children]}return o}function ie(e,n,i,o){const t=[...i];let s=e,g=n+1;for(;s?.[o.children];){const a=s[o.children][0];t[g]=a.value,s=a,g+=1}return t}function K(e,n,i){return e.findIndex(o=>o?.[i.value]===n)}function Z(e){const[n]=e;return se(n)}function ue(e,n){return e>n?"horizontal":n>e?"vertical":""}function De(e,n,i){const o=[];for(let t=e;t<=n;t++){const s=i(`${t}`);o.push({label:s,value:t})}return o}function Se(e,n){return e===n.getFullYear()}function xe(e,n){return e===n.getFullYear()}function ye(e,n){return e===n.getMonth()+1}function Ce(e,n){return e===n.getMonth()+1}function Ye(e,n){return new Date(e,n,0).getDate()}function Oe(e,n,i){const o=new Date,t=Date.now(),s=e.getTime(),g=n.getTime(),a=t>=s&&t<=g;return i==="year"?a?o.getFullYear():e.getFullYear():i==="month"?a?o.getMonth()+1:e.getMonth()+1:a?o.getDate():e.getDate()}function we(e){return e}function ce(e){return/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e)}function Pe(e){if(!ce(e))return null;const[n,i,o]=e.split(":");return{hour:Number(n),minute:Number(i),second:Number(o)}}function Ee(e){return e.padStart(2,"0")}function Ne(e,n,i){const o=Date.now(),{hour:t,minute:s,second:g}=e,{hour:a,minute:h,second:d}=n,T=new Date().setHours(t,s,g),I=new Date().setHours(a,h,d),m=o>=T&&o<=I;return i==="hour"?m?new Date().getHours():t:i==="minute"?m?new Date().getMinutes():s:m?new Date().getSeconds():g}const fe=16,C=48,de=.52,H=150,N=300,me=15,pe=.008,Ae=["year","month","day"],Ve=["hour","minute","second"];function he(){const e={startX:0,startY:0,deltaX:0,deltaY:0,offsetX:0,offsetY:0};let n="";const i=()=>n==="vertical",o=()=>n==="horizontal";function t(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0,n=""}function s(h){const d="touches"in h?h.touches[0]:h;t(),e.startX=d.clientX,e.startY=d.clientY}function g(h){if(!e.startX||!e.startY)return!0;const d="touches"in h?h.touches[0]:h;e.deltaX=Math.max(d.clientX,0)-e.startX,e.deltaY=d.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY);const T=10;(!n||e.offsetX<T&&e.offsetY<T)&&(n=ue(e.offsetX,e.offsetY))}function a(){e.startX=0,e.startY=0}return{pointer:e,move:g,start:s,stop:a,reset:t,isVertical:i,isHorizontal:o}}function ge({column:e,onChange:n}){const o=Number.parseFloat(getComputedStyle(document.documentElement).fontSize)/fe,t=A(0),s=A(0),{pointer:g,start:a,move:h,stop:d}=he();let T=0,I=0,m=0,c=!1,u=null;function p(v){a(v),c=!0,s.value=0,I=Date.now(),T=t.value,m=T,u=null}function r(v){if(h(v))return;const M=L(e)?e.value.length:e.length,w=T+g.deltaY,P=O((M-1)*-C),X=Math.min(Math.max(w,P),0),R=Date.now();t.value=X,!(R-I<=N)&&(I=R,m=X)}function l(){d();const v=t.value-m,k=Date.now()-I;if(k<N&&Math.abs(v)>me){S(v,k);return}const M=F(t.value);s.value=H,Y(M),c=!1}function S(v,k){const M=Math.abs(v/k),w=t.value+M/pe*(v<0?-1:1),P=F(w);s.value=N,Y(P)}function x(){s.value=0,c=!1,u&&(u(),u=null)}function Y(v){const k=-v*O(C),M=()=>n?.(v);c&&k!==t.value?u=M:M(),t.value=k}function F(v){const k=L(e)?e.value.length:e.length,M=Math.round(-v/O(C));return M<0?0:M>=k?k-1:M}function O(v){return v*o}function _(v,k="auto"){c&&k==="smooth"||(u=null,c=k==="smooth",s.value=k==="smooth"?H:0,Y(v))}return{offsetY:$(t),transitionDuration:$(s),onPointerDown:p,onPointerMove:r,onPointerUp:l,stopInertialSliding:x,scrollToIndex:_}}const ve=["onClick"],ke=j({__name:"PickerColumn",props:{column:{},fields:{},selectedIndex:{default:0}},emits:["change"],setup(e,{expose:n,emit:i}){const o=e,t=i,{offsetY:s,transitionDuration:g,onPointerDown:a,onPointerMove:h,onPointerUp:d,stopInertialSliding:T,scrollToIndex:I}=ge({column:J(o,"column"),onChange:m});function m(p){p!==o.selectedIndex&&t("change",p)}function c(p=o.selectedIndex,r){I(p,r)}function u(p){p!==o.selectedIndex&&c(p,"smooth")}return n({scrollToSelected:c}),(p,r)=>(b(),D("div",{class:"chook-picker-column","aria-label":"Picker column",onTouchstartPassive:r[1]||(r[1]=(...l)=>f(a)&&f(a)(...l)),onTouchmove:r[2]||(r[2]=q((...l)=>f(h)&&f(h)(...l),["prevent"])),onTouchendPassive:r[3]||(r[3]=(...l)=>f(d)&&f(d)(...l)),onTouchcancel:r[4]||(r[4]=(...l)=>f(d)&&f(d)(...l)),onMousedownPassive:r[5]||(r[5]=(...l)=>f(a)&&f(a)(...l)),onMousemovePassive:r[6]||(r[6]=(...l)=>f(h)&&f(h)(...l)),onMouseupPassive:r[7]||(r[7]=(...l)=>f(d)&&f(d)(...l)),onMouseleavePassive:r[8]||(r[8]=(...l)=>f(d)&&f(d)(...l))},[y("ul",{style:B({overflowY:"hidden",transform:`translate3d(0, ${f(s)}px, 0)`,transitionDuration:`${f(g)}ms`,transitionProperty:f(g)?"all":"none"}),onTransitionend:r[0]||(r[0]=(...l)=>f(T)&&f(T)(...l))},[(b(!0),D(V,null,G(e.column,(l,S)=>(b(),D("li",{key:l?.[e.fields.value],class:"chook-picker-column-item",role:"button",tabindex:"0",onClick:x=>u(S)},[y("p",{class:"chook-picker-column-label",style:B({transform:`rotate3d(1, 0, 0, ${(S*f(C)+f(s))*f(de)}deg)`})},Q(l?.[e.fields.label]),5)],8,ve))),128))],36)],32))}}),Te={class:"chook-picker-container","aria-label":"Picker"},Me={class:"chook-picker-loading"},Ie={key:1,class:"chook-picker-columns"},Fe=j({__name:"Picker",props:U({columns:{},loading:{type:Boolean},columnsFieldNames:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(e,{emit:n}){const i=e,o=n,t=W(e,"modelValue"),s=A([]),g=ee("columnsRef"),a=E(()=>le(i.columnsFieldNames)),h=E(()=>ae(i.columns,a.value)),d=E(()=>{const{columns:m}=i;return h.value==="single"?[m]:h.value==="multiple"?m:re(m,t.value,a.value)});function T(m,c){const u=d.value[m],p=u[c]?.[a.value.value],r=t.value[m];if(p===r)return;const l=[...t.value];if(l[m]=p,h.value==="cascade"){const S=u[c];t.value=ie(S,m,l,a.value)}else t.value=l;oe(()=>{o("change",t.value)})}function I(){const m=d.value.length,c=[];for(let u=0;u<m;u++){const p=d.value[u],r=t.value[u],l=K(p,r,a.value);if(l===-1){const x=(s.value[u]??0)>=p.length?Math.max(p.length-1,0):0;t.value[u]=p[x]?.[a.value.value],c[u]=x}else c[u]=l;c[u]!==s.value[u]&&g.value?.[u]?.scrollToSelected(c[u])}s.value=c}return ne(()=>{I()},{flush:"post"}),(m,c)=>(b(),D("div",Te,[e.loading?(b(),D(V,{key:0},[y("div",Me,[z(m.$slots,"loading")]),c[1]||(c[1]=y("div",{class:"chook-picker-columns"},null,-1))],64)):e.columns.length?(b(),D("div",{key:2,class:"chook-picker-columns chook-picker-columns-backdrop",onTouchmove:c[0]||(c[0]=q(()=>{},["stop"]))},[(b(!0),D(V,null,G(d.value,(u,p)=>(b(),te(ke,{key:p,ref_for:!0,ref_key:"columnsRef",ref:g,column:u,fields:a.value,"selected-index":s.value[p],onChange:r=>T(p,r)},null,8,["column","fields","selected-index","onChange"]))),128)),c[2]||(c[2]=y("div",{class:"chook-picker-mask-backdrop"},null,-1))],32)):(b(),D("div",Ie,[z(m.$slots,"empty")]))]))}}),Xe="#### CSS Variables\n\n| Name                                | Default Value                                                                                                                                                         |\n| :---------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| --chook-picker-background           | `#fff`                                                                                                                                                                |\n| --chook-picker-columns-margin       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-columns-backdrop     | `linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 0.0625rem, transparent 0.0625rem, transparent calc(100% - 0.0625rem), #f2f2f2 calc(100% - 0.0625rem), #f2f2f2 100%)` |\n| --chook-picker-mask-backdrop        | `linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4)), linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))`              |\n| --chook-picker-column-label-color   | `#323233`                                                                                                                                                             |\n| --chook-picker-column-label-padding | `0 0.25rem`                                                                                                                                                           |\n| --chook-picker-column-font-size     | `1rem`                                                                                                                                                                |\n| --chook-picker-column-font-weight   | `500`                                                                                                                                                                 |\n",Re="### Installation\n\n::: group\n\n```bash [npm]\n$ npm install @component-hook/picker\n```\n\n```bash [yarn]\n$ yarn add @component-hook/picker\n```\n\n```bash [pnpm]\n$ pnpm install @component-hook/picker\n```\n\n:::\n";export{Ae as D,Fe as _,Se as a,xe as b,Xe as c,ye as d,Ce as e,Ye as f,De as g,Oe as h,Re as i,we as j,Pe as k,Ne as l,Ee as m,Ve as n};
