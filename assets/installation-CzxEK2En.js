import{r as O,i as j,j as q,d as R,k as ne,a as E,o as C,e as S,F as B,l as _,n as G,u as m,t as A,p as oe,c as L,T as se,b as K,q as Z,w as X,s as J,v as Q,x as z,h as Y,y as le,z as ae,A as ie}from"./index-BnSZmsPs.js";const re=Array.isArray;function ce(e,t){if(te(e))return"multiple";const[l]=e;return l?.[t.children]?"cascade":"single"}function ue(e){return{children:e?.children||"children",label:e?.label||"label",value:e?.value||"value"}}function de(e,t,l){if(te(e))return[];const s=[];let n=e,o=0;for(;n;){const c=t[o];let a=ee(n,c,l);a===-1&&(a=0),s.push(n),o+=1,n=n[a]?.[l.children]}return s}function fe(e,t,l,s){const n=[...l];let o=e,c=t+1;for(;o?.[s.children];){const a=o[s.children][0];n[c]=a.value,o=a,c+=1}return n}function ee(e,t,l){return e.findIndex(s=>s?.[l.value]===t)}function te(e){const[t]=e;return re(t)}function me(e,t){return e>t?"horizontal":t>e?"vertical":""}function Ee(e,t,l){const s=[];for(let n=e;n<=t;n++){const o=l(`${n}`);s.push({label:o,value:n})}return s}function Oe(e,t){return e===t.getFullYear()}function Ye(e,t){return e===t.getFullYear()}function Ae(e,t){return e===t.getMonth()+1}function Pe(e,t){return e===t.getMonth()+1}function $e(e,t){return new Date(e,t,0).getDate()}function Ne(e,t,l){const s=new Date,n=Date.now(),o=e.getTime(),c=t.getTime(),a=n>=o&&n<=c;return l==="year"?a?s.getFullYear():e.getFullYear():l==="month"?a?s.getMonth()+1:e.getMonth()+1:a?s.getDate():e.getDate()}function Fe(e){return e}function pe(e){return/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e)}function Be(e){if(!pe(e))return null;const[t,l,s]=e.split(":");return{hour:Number(t),minute:Number(l),second:Number(s)}}function Le(e){return e.padStart(2,"0")}function Xe(e,t,l){const s=Date.now(),{hour:n,minute:o,second:c}=e,{hour:a,minute:h,second:i}=t,g=new Date().setHours(n,o,c),b=new Date().setHours(a,h,i),I=s>=g&&s<=b;return l==="hour"?I?new Date().getHours():n:l==="minute"?I?new Date().getMinutes():o:I?new Date().getSeconds():c}const ke=16,P=48,he=.52,W=150,F=300,ve=15,ge=.008,ze="Select Date",Re=["year","month","day"],Ue="Select Time",He=["hour","minute","second"];function Te(){const e={startX:0,startY:0,deltaX:0,deltaY:0,offsetX:0,offsetY:0};let t="";const l=()=>t==="vertical",s=()=>t==="horizontal";function n(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0,t=""}function o(h){const i="touches"in h?h.touches[0]:h;n(),e.startX=i.clientX,e.startY=i.clientY}function c(h){if(!e.startX||!e.startY)return!0;const i="touches"in h?h.touches[0]:h;e.deltaX=Math.max(i.clientX,0)-e.startX,e.deltaY=i.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY);const g=10;(!t||e.offsetX<g&&e.offsetY<g)&&(t=me(e.offsetX,e.offsetY))}function a(){e.startX=0,e.startY=0}return{pointer:e,move:c,start:o,stop:a,reset:n,isVertical:l,isHorizontal:s}}function be({column:e,onChange:t}){const s=Number.parseFloat(getComputedStyle(document.documentElement).fontSize)/ke,n=O(0),o=O(0),{pointer:c,start:a,move:h,stop:i}=Te();let g=0,b=0,I=0,w=!1,M=null;function y(k){a(k),w=!0,o.value=0,b=Date.now(),g=n.value,I=g,M=null}function u(k){if(h(k))return;const D=q(e)?e.value.length:e.length,$=g+c.deltaY,N=x((D-1)*-P),U=Math.min(Math.max($,N),0),H=Date.now();n.value=U,!(H-b<=F)&&(b=H,I=U)}function d(){i();const k=n.value-I,v=Date.now()-b;if(v<F&&Math.abs(k)>ve){p(k,v);return}const D=T(n.value);o.value=W,r(D),w=!1}function p(k,v){const D=Math.abs(k/v),$=n.value+D/ge*(k<0?-1:1),N=T($);o.value=F,r(N)}function f(){o.value=0,w=!1,M&&(M(),M=null)}function r(k){const v=-k*x(P),D=()=>t?.(k);w&&v!==n.value?M=D:D(),n.value=v}function T(k){const v=q(e)?e.value.length:e.length,D=Math.round(-k/x(P));return D<0?0:D>=v?v-1:D}function x(k){return k*s}function V(k,v="auto"){w&&v==="smooth"||(M=null,w=v==="smooth",o.value=v==="smooth"?W:0,r(k))}return{offsetY:j(n),transitionDuration:j(o),onPointerDown:y,onPointerMove:u,onPointerUp:d,stopInertialSliding:f,scrollToIndex:V}}const we=["onClick"],ye=R({__name:"PickerColumn",props:{column:{},fields:{},selectedIndex:{default:0}},emits:["change"],setup(e,{expose:t,emit:l}){const s=e,n=l,{offsetY:o,transitionDuration:c,onPointerDown:a,onPointerMove:h,onPointerUp:i,stopInertialSliding:g,scrollToIndex:b}=be({column:ne(s,"column"),onChange:I});function I(y){y!==s.selectedIndex&&n("change",y)}function w(y=s.selectedIndex,u){b(y,u)}function M(y){y!==s.selectedIndex&&w(y,"smooth")}return t({scrollToSelected:w}),(y,u)=>(C(),E("div",{class:"chook-picker-column",onTouchstartPassive:u[1]||(u[1]=(...d)=>m(a)&&m(a)(...d)),onTouchmovePassive:u[2]||(u[2]=(...d)=>m(h)&&m(h)(...d)),onTouchendPassive:u[3]||(u[3]=(...d)=>m(i)&&m(i)(...d)),onTouchcancel:u[4]||(u[4]=(...d)=>m(i)&&m(i)(...d)),onMousedownPassive:u[5]||(u[5]=(...d)=>m(a)&&m(a)(...d)),onMousemovePassive:u[6]||(u[6]=(...d)=>m(h)&&m(h)(...d)),onMouseupPassive:u[7]||(u[7]=(...d)=>m(i)&&m(i)(...d))},[S("ul",{style:G({overflowY:"hidden",transform:`translate3d(0, ${m(o)}px, 0)`,transitionDuration:`${m(c)}ms`,transitionProperty:m(c)?"all":"none"}),onTransitionend:u[0]||(u[0]=(...d)=>m(g)&&m(g)(...d))},[(C(!0),E(B,null,_(e.column,(d,p)=>(C(),E("li",{key:d?.[e.fields.value],class:"chook-picker-column-item",role:"button",tabindex:"0",onClick:f=>M(p)},[S("p",{class:"chook-picker-column-label",style:G({transform:`rotate3d(1, 0, 0, ${(p*m(P)+m(o))*m(he)}deg)`})},A(d?.[e.fields.label]),5)],8,we))),128))],36)],32))}}),De={class:"chook-picker-container"},Ie=R({__name:"Popup",props:{teleport:{default:"body"},modelValue:{type:Boolean}},emits:["update:modelValue","open","close","closed"],setup(e,{emit:t}){const l=e,s=t;return oe(()=>l.modelValue,n=>{n?(document.body.style.overflow="hidden",s("open")):(document.body.style.overflow="",s("close"))},{immediate:!0}),(n,o)=>(C(),L(se,{to:e.teleport},[K(Z,{name:"chook-picker-fade"},{default:X(()=>[J(S("div",{class:"chook-picker-mask",onClick:o[0]||(o[0]=c=>n.$emit("update:modelValue",!1))},null,512),[[Q,e.modelValue]])]),_:1}),K(Z,{name:"chook-picker-slide",onAfterLeave:o[1]||(o[1]=c=>n.$emit("closed"))},{default:X(()=>[J(S("div",De,[z(n.$slots,"default")],512),[[Q,e.modelValue]])]),_:3})],8,["to"]))}}),Me={class:"chook-picker-header"},Se={class:"chook-picker-title"},Ce={class:"chook-picker-loading"},xe={key:1,class:"chook-picker-columns"},je=R({__name:"Picker",props:{show:{type:Boolean},modelValue:{},title:{},columns:{},linkage:{type:Boolean},loading:{type:Boolean},teleport:{},confirmButtonText:{default:"Confirm"},cancelButtonText:{default:"Cancel"},columnsFieldNames:{}},emits:["update:show","update:modelValue","confirm","cancel","open","closed"],setup(e,{emit:t}){const l=e,s=t,n=O([]),o=O([]),c=O([]),a=O(null),h=Y({get:()=>l.show,set:p=>s("update:show",p)}),i=Y(()=>ue(l.columnsFieldNames)),g=Y(()=>ce(l.columns,i.value)),b=Y(()=>{const{columns:p}=l;return g.value==="single"?[p]:g.value==="multiple"?p:de(p,o.value,i.value)});function I(p,f){const r=b.value[p],T=r[f]?.[i.value.value],x=o.value[p];if(T===x)return;const V=[...o.value];if(V[p]=T,g.value==="cascade"){const k=r[f];o.value=fe(k,p,V,i.value)}else o.value=V;l.linkage&&w()}function w(){s("update:modelValue",o.value),n.value=o.value}function M(){s("update:show",!1)}async function y(){s("open"),await ie(),o.value=l.modelValue?[...l.modelValue]:[...n.value]}function u(){l.linkage||w(),M(),s("confirm",o.value)}function d(){M(),s("cancel")}return le(()=>{const p=b.value.length,f=[];for(let r=0;r<p;r++){const T=b.value[r],x=o.value[r],V=ee(T,x,i.value);if(V===-1){const v=(c.value[r]??0)>=T.length?Math.max(T.length-1,0):0;o.value[r]=T[v]?.[i.value.value],f[r]=v}else f[r]=V;f[r]!==c.value[r]&&a.value?.[r].scrollToSelected(f[r])}c.value=f}),(p,f)=>(C(),L(Ie,{modelValue:h.value,"onUpdate:modelValue":f[1]||(f[1]=r=>h.value=r),teleport:e.teleport,onOpen:y,onClosed:f[2]||(f[2]=r=>p.$emit("closed"))},{default:X(()=>[S("div",Me,[S("button",{class:"chook-picker-cancel",onClick:d},A(e.cancelButtonText),1),S("p",Se,A(e.title),1),S("button",{class:"chook-picker-confirm",onClick:u},A(e.confirmButtonText),1)]),e.loading?(C(),E(B,{key:0},[S("div",Ce,[z(p.$slots,"loading")]),f[3]||(f[3]=S("div",{class:"chook-picker-columns"},null,-1))],64)):e.columns.length?(C(),E("div",{key:2,class:"chook-picker-columns chook-picker-columns-backdrop",onTouchmove:f[0]||(f[0]=ae(()=>{},["stop"]))},[(C(!0),E(B,null,_(b.value,(r,T)=>(C(),L(ye,{key:T,ref_for:!0,ref_key:"columnsRef",ref:a,column:r,fields:i.value,"selected-index":c.value[T],onChange:x=>I(T,x)},null,8,["column","fields","selected-index","onChange"]))),128)),f[4]||(f[4]=S("div",{class:"chook-picker-mask-backdrop"},null,-1))],32)):(C(),E("div",xe,[z(p.$slots,"empty")]))]),_:3},8,["modelValue","teleport"]))}}),qe="#### CSS Variables\n\n| Name                                | Default Value                                                                                                                                                         |\n| :---------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| --chook-picker-background           | `#fff`                                                                                                                                                                |\n| --chook-picker-border-radius        | `0.5rem`                                                                                                                                                              |\n| --chook-picker-padding-bottom       | `1.25rem`                                                                                                                                                             |\n| --chook-picker-z-index              | `2147483646`                                                                                                                                                          |\n| --chook-picker-mask-background      | `rgba(0, 0, 0, 0.2)`                                                                                                                                                  |\n| --chook-picker-header-padding       | `0.75rem 0`                                                                                                                                                           |\n| --chook-picker-header-margin-bottom | `1.25rem`                                                                                                                                                             |\n| --chook-picker-title-font-size      | `1rem`                                                                                                                                                                |\n| --chook-picker-title-font-weight    | `500`                                                                                                                                                                 |\n| --chook-picker-title-color          | `#323233`                                                                                                                                                             |\n| --chook-picker-title-padding        | `0 1rem`                                                                                                                                                              |\n| --chook-picker-confirm-color        | `#1989fa`                                                                                                                                                             |\n| --chook-picker-confirm-font-size    | `0.875rem`                                                                                                                                                            |\n| --chook-picker-confirm-padding      | `0 1rem 0 0`                                                                                                                                                          |\n| --chook-picker-cancel-color         | `#969799`                                                                                                                                                             |\n| --chook-picker-cancel-font-size     | `0.875rem`                                                                                                                                                            |\n| --chook-picker-cancel-padding       | `0 0 0 1rem`                                                                                                                                                          |\n| --chook-picker-active-opacity       | `0.6`                                                                                                                                                                 |\n| --chook-picker-columns-margin       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-columns-backdrop     | `linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 0.0625rem, transparent 0.0625rem, transparent calc(100% - 0.0625rem), #f2f2f2 calc(100% - 0.0625rem), #f2f2f2 100%)` |\n| --chook-picker-mask-backdrop        | `linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4)), linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))`              |\n| --chook-picker-column-label-color   | `#323233`                                                                                                                                                             |\n| --chook-picker-column-label-padding | `0 0.25rem`                                                                                                                                                           |\n| --chook-picker-column-font-size     | `1rem`                                                                                                                                                                |\n| --chook-picker-column-font-weight   | `500`                                                                                                                                                                 |\n",Ge="### Installation\n\n::: group\n\n```bash [npm]\n$ npm install @component-hook/picker\n```\n\n```bash [yarn]\n$ yarn add @component-hook/picker\n```\n\n```bash [pnpm]\n$ pnpm install @component-hook/picker\n```\n\n:::\n";export{Re as D,je as _,ze as a,Oe as b,qe as c,Ye as d,Ae as e,Fe as f,Ee as g,Pe as h,Ge as i,$e as j,Ne as k,Le as l,He as m,Ue as n,Be as o,Xe as p};
