import{r as A,k as $,l as L,d as j,n as J,a as D,o as b,u as m,p as q,e as x,F as V,q as G,s as B,t as Q,h as U,i as W,v as ee,j as E,x as ne,y as z,c as te,z as oe}from"./index-kPaiDfFq.js";const se=Array.isArray;function ae(e,n){if(Z(e))return"multiple";const[i]=e;return i?.[n.children]?"cascade":"single"}function le(e){return{children:e?.children||"children",label:e?.label||"label",value:e?.value||"value"}}function re(e,n,i){if(Z(e))return[];const o=[];let t=e,s=0;for(;t;){const v=n[s];let a=K(t,v,i);a===-1&&(a=0),o.push(t),s+=1,t=t[a]?.[i.children]}return o}function ie(e,n,i,o){const t=[...i];let s=e,v=n+1;for(;s?.[o.children];){const a=s[o.children][0];t[v]=a.value,s=a,v+=1}return t}function K(e,n,i){return e.findIndex(o=>o?.[i.value]===n)}function Z(e){const[n]=e;return se(n)}function ce(e,n){return e>n?"horizontal":n>e?"vertical":""}function De(e,n,i){const o=[];for(let t=e;t<=n;t++){const s=i(`${t}`);o.push({label:s,value:t})}return o}function ye(e,n){return e===n.getFullYear()}function Se(e,n){return e===n.getFullYear()}function xe(e,n){return e===n.getMonth()+1}function Ce(e,n){return e===n.getMonth()+1}function Ye(e,n){return new Date(e,n,0).getDate()}function Oe(e,n,i){const o=new Date,t=Date.now(),s=e.getTime(),v=n.getTime(),a=t>=s&&t<=v;return i==="year"?a?o.getFullYear():e.getFullYear():i==="month"?a?o.getMonth()+1:e.getMonth()+1:a?o.getDate():e.getDate()}function we(e){return e}function ue(e){return/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e)}function Pe(e){if(!ue(e))return null;const[n,i,o]=e.split(":");return{hour:Number(n),minute:Number(i),second:Number(o)}}function Ee(e){return e.padStart(2,"0")}function Ne(e,n,i){const o=Date.now(),{hour:t,minute:s,second:v}=e,{hour:a,minute:h,second:f}=n,T=new Date().setHours(t,s,v),I=new Date().setHours(a,h,f),d=o>=T&&o<=I;return i==="hour"?d?new Date().getHours():t:i==="minute"?d?new Date().getMinutes():s:d?new Date().getSeconds():v}const fe=16,C=48,de=.52,H=150,N=300,me=15,pe=.008,Ae=["year","month","day"],Ve=["hour","minute","second"];function he(){const e={startX:0,startY:0,deltaX:0,deltaY:0,offsetX:0,offsetY:0};let n="";const i=()=>n==="vertical",o=()=>n==="horizontal";function t(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0,n=""}function s(h){const f="touches"in h?h.touches[0]:h;t(),e.startX=f.clientX,e.startY=f.clientY}function v(h){if(!e.startX||!e.startY)return!0;const f="touches"in h?h.touches[0]:h;e.deltaX=Math.max(f.clientX,0)-e.startX,e.deltaY=f.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY);const T=10;(!n||e.offsetX<T&&e.offsetY<T)&&(n=ce(e.offsetX,e.offsetY))}function a(){e.startX=0,e.startY=0}return{pointer:e,move:v,start:s,stop:a,reset:t,isVertical:i,isHorizontal:o}}function ve({column:e,onChange:n}){const o=Number.parseFloat(getComputedStyle(document.documentElement).fontSize)/fe,t=A(0),s=A(0),{pointer:v,start:a,move:h,stop:f}=he();let T=0,I=0,d=0,u=!1,c=null;function p(g){a(g),u=!0,s.value=0,I=Date.now(),T=t.value,d=T,c=null}function r(g){if(h(g))return;const M=L(e)?e.value.length:e.length,w=T+v.deltaY,P=O((M-1)*-C),X=Math.min(Math.max(w,P),0),R=Date.now();t.value=X,!(R-I<=N)&&(I=R,d=X)}function l(){f();const g=t.value-d,k=Date.now()-I;if(k<N&&Math.abs(g)>me){y(g,k);return}const M=F(t.value);s.value=H,Y(M),u=!1}function y(g,k){const M=Math.abs(g/k),w=t.value+M/pe*(g<0?-1:1),P=F(w);s.value=N,Y(P)}function S(){s.value=0,u=!1,c&&(c(),c=null)}function Y(g){const k=-g*O(C),M=()=>n?.(g);u&&k!==t.value?c=M:M(),t.value=k}function F(g){const k=L(e)?e.value.length:e.length,M=Math.round(-g/O(C));return M<0?0:M>=k?k-1:M}function O(g){return g*o}function _(g,k="auto"){u&&k==="smooth"||(c=null,u=k==="smooth",s.value=k==="smooth"?H:0,Y(g))}return{offsetY:$(t),transitionDuration:$(s),onPointerDown:p,onPointerMove:r,onPointerUp:l,stopInertialSliding:S,scrollToIndex:_}}const ge=["onClick"],ke=j({__name:"PickerColumn",props:{column:{},fields:{},selectedIndex:{default:0}},emits:["change"],setup(e,{expose:n,emit:i}){const o=e,t=i,{offsetY:s,transitionDuration:v,onPointerDown:a,onPointerMove:h,onPointerUp:f,stopInertialSliding:T,scrollToIndex:I}=ve({column:J(o,"column"),onChange:d});function d(p){p!==o.selectedIndex&&t("change",p)}function u(p=o.selectedIndex,r){I(p,r)}function c(p){p!==o.selectedIndex&&u(p,"smooth")}return n({scrollToSelected:u}),(p,r)=>(b(),D("div",{class:"chook-picker-column","aria-label":"Picker column",onTouchstartPassive:r[1]||(r[1]=(...l)=>m(a)&&m(a)(...l)),onTouchmove:r[2]||(r[2]=q((...l)=>m(h)&&m(h)(...l),["prevent"])),onTouchendPassive:r[3]||(r[3]=(...l)=>m(f)&&m(f)(...l)),onTouchcancel:r[4]||(r[4]=(...l)=>m(f)&&m(f)(...l)),onMousedownPassive:r[5]||(r[5]=(...l)=>m(a)&&m(a)(...l)),onMousemovePassive:r[6]||(r[6]=(...l)=>m(h)&&m(h)(...l)),onMouseupPassive:r[7]||(r[7]=(...l)=>m(f)&&m(f)(...l)),onMouseleavePassive:r[8]||(r[8]=(...l)=>m(f)&&m(f)(...l))},[x("ul",{style:B({overflowY:"hidden","--offset-y":`${m(s)}`,transform:"translate3d(0, calc(var(--offset-y) * 1px), 0)",transitionDuration:`${m(v)}ms`,transitionProperty:m(v)?"all":"none"}),onTransitionend:r[0]||(r[0]=(...l)=>m(T)&&m(T)(...l))},[(b(!0),D(V,null,G(e.column,(l,y)=>(b(),D("li",{key:l?.[e.fields.value],class:"chook-picker-column-item",role:"button",tabindex:"0",onClick:S=>c(y)},[x("p",{class:"chook-picker-column-label",style:B({transform:`rotate3d(1, 0, 0, calc((${y*m(C)} + var(--offset-y)) * ${m(de)}deg)`})},Q(l?.[e.fields.label]),5)],8,ge))),128))],36)],32))}}),Te={class:"chook-picker-container","aria-label":"Picker"},Me={class:"chook-picker-loading"},Ie={key:1,class:"chook-picker-columns"},Fe=j({__name:"Picker",props:U({columns:{},loading:{type:Boolean},columnsFieldNames:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:U(["change"],["update:modelValue"]),setup(e,{emit:n}){const i=e,o=n,t=W(e,"modelValue"),s=A([]),v=ee("columnsRef"),a=E(()=>le(i.columnsFieldNames)),h=E(()=>ae(i.columns,a.value)),f=E(()=>{const{columns:d}=i;return h.value==="single"?[d]:h.value==="multiple"?d:re(d,t.value,a.value)});function T(d,u){const c=f.value[d],p=c[u]?.[a.value.value],r=t.value[d];if(p===r)return;const l=[...t.value];if(l[d]=p,h.value==="cascade"){const y=c[u];t.value=ie(y,d,l,a.value)}else t.value=l;oe(()=>{o("change",t.value)})}function I(){const d=f.value.length,u=[];for(let c=0;c<d;c++){const p=f.value[c],r=t.value[c],l=K(p,r,a.value);if(l===-1){const S=(s.value[c]??0)>=p.length?Math.max(p.length-1,0):0;t.value[c]=p[S]?.[a.value.value],u[c]=S}else u[c]=l;u[c]!==s.value[c]&&v.value?.[c]?.scrollToSelected(u[c])}s.value=u}return ne(()=>{I()},{flush:"post"}),(d,u)=>(b(),D("div",Te,[e.loading?(b(),D(V,{key:0},[x("div",Me,[z(d.$slots,"loading")]),u[1]||(u[1]=x("div",{class:"chook-picker-columns"},null,-1))],64)):e.columns.length?(b(),D("div",{key:2,class:"chook-picker-columns chook-picker-columns-backdrop",onTouchmove:u[0]||(u[0]=q(()=>{},["stop"]))},[(b(!0),D(V,null,G(f.value,(c,p)=>(b(),te(ke,{key:p,ref_for:!0,ref_key:"columnsRef",ref:v,column:c,fields:a.value,"selected-index":s.value[p],onChange:r=>T(p,r)},null,8,["column","fields","selected-index","onChange"]))),128)),u[2]||(u[2]=x("div",{class:"chook-picker-mask-backdrop"},null,-1))],32)):(b(),D("div",Ie,[z(d.$slots,"empty")]))]))}}),Xe="#### CSS Variables\n\n| Name                                | Default Value                                                                                                                                                         |\n| :---------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| --chook-picker-background           | `#fff`                                                                                                                                                                |\n| --chook-picker-columns-margin       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-columns-backdrop     | `linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 0.0625rem, transparent 0.0625rem, transparent calc(100% - 0.0625rem), #f2f2f2 calc(100% - 0.0625rem), #f2f2f2 100%)` |\n| --chook-picker-mask-backdrop        | `linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4)), linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))`              |\n| --chook-picker-column-label-color   | `#323233`                                                                                                                                                             |\n| --chook-picker-column-label-padding | `0 0.25rem`                                                                                                                                                           |\n| --chook-picker-column-font-size     | `1rem`                                                                                                                                                                |\n| --chook-picker-column-font-weight   | `500`                                                                                                                                                                 |\n",Re="### Installation\n\n::: group\n\n```bash [npm]\n$ npm install @component-hook/picker\n```\n\n```bash [yarn]\n$ yarn add @component-hook/picker\n```\n\n```bash [pnpm]\n$ pnpm install @component-hook/picker\n```\n\n:::\n";export{Ae as D,Fe as _,ye as a,Se as b,Xe as c,xe as d,Ce as e,Ye as f,De as g,Oe as h,Re as i,we as j,Pe as k,Ne as l,Ee as m,Ve as n};
