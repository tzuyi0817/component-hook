import{r as Y,i as _,j,d as R,k as te,a as O,o as C,e as S,F as B,l as W,n as q,u as p,t as P,p as oe,c as L,T as se,b as G,q as K,w as X,s as Z,v as J,x as z,h as A,y as le,z as ae,A as re}from"./index-CufZUD5D.js";const ie=Array.isArray;function ce(e,t){if(ne(e))return"multiple";const[l]=e;return l?.[t.children]?"cascade":"single"}function ue(e){return{children:e?.children||"children",label:e?.label||"label",value:e?.value||"value"}}function de(e,t,l){if(ne(e))return[];const s=[];let n=e,o=0;for(;n;){const u=t[o];let r=ee(n,u,l);r===-1&&(r=0),s.push(n),o+=1,n=n[r]?.[l.children]}return s}function fe(e,t,l,s){const n=[...l];let o=e,u=t+1;for(;o?.[s.children];){const r=o[s.children][0];n[u]=r.value,o=r,u+=1}return n}function ee(e,t,l){return e.findIndex(s=>s?.[l.value]===t)}function ne(e){const[t]=e;return ie(t)}function me(e,t){return e>t?"horizontal":t>e?"vertical":""}function Oe(e,t,l){const s=[];for(let n=e;n<=t;n++){const o=l(`${n}`);s.push({label:o,value:n})}return s}function Ye(e,t){return e===t.getFullYear()}function Ae(e,t){return e===t.getFullYear()}function Pe(e,t){return e===t.getMonth()+1}function xe(e,t){return e===t.getMonth()+1}function $e(e,t){return new Date(e,t,0).getDate()}function Ne(e,t,l){const s=new Date,n=Date.now(),o=e.getTime(),u=t.getTime(),r=n>=o&&n<=u;return l==="year"?r?s.getFullYear():e.getFullYear():l==="month"?r?s.getMonth()+1:e.getMonth()+1:r?s.getDate():e.getDate()}function Fe(e){return e}function pe(e){return/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e)}function Be(e){if(!pe(e))return null;const[t,l,s]=e.split(":");return{hour:Number(t),minute:Number(l),second:Number(s)}}function Le(e){return e.padStart(2,"0")}function Xe(e,t,l){const s=Date.now(),{hour:n,minute:o,second:u}=e,{hour:r,minute:h,second:i}=t,g=new Date().setHours(n,o,u),w=new Date().setHours(r,h,i),I=s>=g&&s<=w;return l==="hour"?I?new Date().getHours():n:l==="minute"?I?new Date().getMinutes():o:I?new Date().getSeconds():u}const ke=16,x=48,he=.52,Q=150,F=300,ve=15,ge=.008,ze="Select Date",Re=["year","month","day"],Ue="Select Time",He=["hour","minute","second"];function Te(){const e={startX:0,startY:0,deltaX:0,deltaY:0,offsetX:0,offsetY:0};let t="";const l=()=>t==="vertical",s=()=>t==="horizontal";function n(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0,t=""}function o(h){const i="touches"in h?h.touches[0]:h;n(),e.startX=i.clientX,e.startY=i.clientY}function u(h){if(!e.startX||!e.startY)return!0;const i="touches"in h?h.touches[0]:h;e.deltaX=Math.max(i.clientX,0)-e.startX,e.deltaY=i.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY);const g=10;(!t||e.offsetX<g&&e.offsetY<g)&&(t=me(e.offsetX,e.offsetY))}function r(){e.startX=0,e.startY=0}return{pointer:e,move:u,start:o,stop:r,reset:n,isVertical:l,isHorizontal:s}}function be({column:e,onChange:t}){const s=Number.parseFloat(getComputedStyle(document.documentElement).fontSize)/ke,n=Y(0),o=Y(0),{pointer:u,start:r,move:h,stop:i}=Te();let g=0,w=0,I=0,y=!1,M=null;function T(k){r(k),y=!0,o.value=0,w=Date.now(),g=n.value,I=g,M=null}function d(k){if(h(k))return;const D=j(e)?e.value.length:e.length,$=g+u.deltaY,N=V((D-1)*-x),U=Math.min(Math.max($,N),0),H=Date.now();n.value=U,!(H-w<=F)&&(w=H,I=U)}function f(){i();const k=n.value-I,v=Date.now()-w;if(v<F&&Math.abs(k)>ve){a(k,v);return}const D=b(n.value);o.value=Q,c(D),y=!1}function a(k,v){const D=Math.abs(k/v),$=n.value+D/ge*(k<0?-1:1),N=b($);o.value=F,c(N)}function m(){o.value=0,y=!1,M&&(M(),M=null)}function c(k){const v=-k*V(x),D=()=>t?.(k);y&&v!==n.value?M=D:D(),n.value=v}function b(k){const v=j(e)?e.value.length:e.length,D=Math.round(-k/V(x));return D<0?0:D>=v?v-1:D}function V(k){return k*s}function E(k,v="auto"){y&&v==="smooth"||(M=null,y=v==="smooth",o.value=v==="smooth"?Q:0,c(k))}return{offsetY:_(n),transitionDuration:_(o),onPointerDown:T,onPointerMove:d,onPointerUp:f,stopInertialSliding:m,scrollToIndex:E}}const we=["onClick"],ye=R({__name:"PickerColumn",props:{column:{},fields:{},selectedIndex:{default:0}},emits:["change"],setup(e,{expose:t,emit:l}){const s=e,n=l,{offsetY:o,transitionDuration:u,onPointerDown:r,onPointerMove:h,onPointerUp:i,stopInertialSliding:g,scrollToIndex:w}=be({column:te(s,"column"),onChange:I});function I(T){T!==s.selectedIndex&&n("change",T)}function y(T=s.selectedIndex,d){w(T,d)}function M(T){T!==s.selectedIndex&&y(T,"smooth")}return t({scrollToSelected:y}),(T,d)=>(C(),O("div",{class:"chook-picker-column",onTouchstartPassive:d[1]||(d[1]=(...f)=>p(r)&&p(r)(...f)),onTouchmovePassive:d[2]||(d[2]=(...f)=>p(h)&&p(h)(...f)),onTouchendPassive:d[3]||(d[3]=(...f)=>p(i)&&p(i)(...f)),onTouchcancel:d[4]||(d[4]=(...f)=>p(i)&&p(i)(...f)),onMousedownPassive:d[5]||(d[5]=(...f)=>p(r)&&p(r)(...f)),onMousemovePassive:d[6]||(d[6]=(...f)=>p(h)&&p(h)(...f)),onMouseupPassive:d[7]||(d[7]=(...f)=>p(i)&&p(i)(...f))},[S("ul",{style:q({overflowY:"hidden",transform:`translate3d(0, ${p(o)}px, 0)`,transitionDuration:`${p(u)}ms`,transitionProperty:p(u)?"all":"none"}),onTransitionend:d[0]||(d[0]=(...f)=>p(g)&&p(g)(...f))},[(C(!0),O(B,null,W(T.column,(f,a)=>(C(),O("li",{key:f?.[T.fields.value],class:"chook-picker-column-item",role:"button",tabindex:"0",onClick:m=>M(a)},[S("p",{class:"chook-picker-column-label",style:q({transform:`rotate3d(1, 0, 0, ${(a*p(x)+p(o))*p(he)}deg)`})},P(f?.[T.fields.label]),5)],8,we))),128))],36)],32))}}),De={class:"chook-picker-container"},Ie=R({__name:"Popup",props:{teleport:{default:"body"},modelValue:{type:Boolean}},emits:["update:modelValue","open","close","closed"],setup(e,{emit:t}){const l=e,s=t;return oe(()=>l.modelValue,n=>{n?(document.body.style.overflow="hidden",s("open")):(document.body.style.overflow="",s("close"))},{immediate:!0}),(n,o)=>(C(),L(se,{to:n.teleport},[G(K,{name:"chook-picker-fade"},{default:X(()=>[Z(S("div",{class:"chook-picker-mask",onClick:o[0]||(o[0]=u=>n.$emit("update:modelValue",!1))},null,512),[[J,n.modelValue]])]),_:1}),G(K,{name:"chook-picker-slide",onAfterLeave:o[1]||(o[1]=u=>n.$emit("closed"))},{default:X(()=>[Z(S("div",De,[z(n.$slots,"default")],512),[[J,n.modelValue]])]),_:3})],8,["to"]))}}),Me={class:"chook-picker-header"},Se={class:"chook-picker-title"},Ce={class:"chook-picker-loading"},Ve={key:1,class:"chook-picker-columns"},_e=R({__name:"Picker",props:{show:{type:Boolean},modelValue:{},title:{},columns:{},linkage:{type:Boolean},loading:{type:Boolean},teleport:{},confirmButtonText:{default:"Confirm"},cancelButtonText:{default:"Cancel"},columnsFieldNames:{}},emits:["update:show","update:modelValue","confirm","cancel","open","closed"],setup(e,{emit:t}){const l=e,s=t,n=Y([]),o=Y([]),u=Y([]),r=Y(null),h=A({get:()=>l.show,set:a=>s("update:show",a)}),i=A(()=>ue(l.columnsFieldNames)),g=A(()=>ce(l.columns,i.value)),w=A(()=>{const{columns:a}=l;return g.value==="single"?[a]:g.value==="multiple"?a:de(a,o.value,i.value)});function I(a,m){const c=w.value[a],b=c[m]?.[i.value.value],V=o.value[a];if(b===V)return;const E=[...o.value];if(E[a]=b,g.value==="cascade"){const k=c[m];o.value=fe(k,a,E,i.value)}else o.value=E;l.linkage&&y()}function y(){s("update:modelValue",o.value),n.value=o.value}function M(){s("update:show",!1)}async function T(){s("open"),await re(),o.value=l.modelValue?[...l.modelValue]:[...n.value]}function d(){l.linkage||y(),M(),s("confirm",o.value)}function f(){M(),s("cancel")}return le(()=>{const a=w.value.length,m=[];for(let c=0;c<a;c++){const b=w.value[c],V=o.value[c],E=ee(b,V,i.value);if(E===-1){const v=(u.value[c]??0)>=b.length?Math.max(b.length-1,0):0;o.value[c]=b[v]?.[i.value.value],m[c]=v}else m[c]=E;m[c]!==u.value[c]&&r.value?.[c].scrollToSelected(m[c])}u.value=m}),(a,m)=>(C(),L(Ie,{modelValue:h.value,"onUpdate:modelValue":m[1]||(m[1]=c=>h.value=c),teleport:a.teleport,onOpen:T,onClosed:m[2]||(m[2]=c=>a.$emit("closed"))},{default:X(()=>[S("div",Me,[S("button",{class:"chook-picker-cancel",onClick:f},P(a.cancelButtonText),1),S("p",Se,P(a.title),1),S("button",{class:"chook-picker-confirm",onClick:d},P(a.confirmButtonText),1)]),a.loading?(C(),O(B,{key:0},[S("div",Ce,[z(a.$slots,"loading")]),m[3]||(m[3]=S("div",{class:"chook-picker-columns"},null,-1))],64)):a.columns.length?(C(),O("div",{key:2,class:"chook-picker-columns chook-picker-columns-backdrop",onTouchmove:m[0]||(m[0]=ae(()=>{},["stop"]))},[(C(!0),O(B,null,W(w.value,(c,b)=>(C(),L(ye,{key:b,ref_for:!0,ref_key:"columnsRef",ref:r,column:c,fields:i.value,"selected-index":u.value[b],onChange:V=>I(b,V)},null,8,["column","fields","selected-index","onChange"]))),128)),m[4]||(m[4]=S("div",{class:"chook-picker-mask-backdrop"},null,-1))],32)):(C(),O("div",Ve,[z(a.$slots,"empty")]))]),_:3},8,["modelValue","teleport"]))}}),je="#### CSS Variables\n\n| Name                                | Default Value                                                                                                                                                         |\n| :---------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| --chook-picker-background           | `#fff`                                                                                                                                                                |\n| --chook-picker-border-radius        | `0.5rem`                                                                                                                                                              |\n| --chook-picker-padding-bottom       | `1.25rem`                                                                                                                                                             |\n| --chook-picker-z-index              | `2147483646`                                                                                                                                                          |\n| --chook-picker-mask-background      | `rgba(0, 0, 0, 0.2)`                                                                                                                                                  |\n| --chook-picker-header-padding       | `0.75rem 0`                                                                                                                                                           |\n| --chook-picker-header-margin-bottom | `1.25rem`                                                                                                                                                             |\n| --chook-picker-title-font-size      | `1rem`                                                                                                                                                                |\n| --chook-picker-title-font-weight    | `500`                                                                                                                                                                 |\n| --chook-picker-title-color          | `#323233`                                                                                                                                                             |\n| --chook-picker-title-padding        | `0 1rem`                                                                                                                                                              |\n| --chook-picker-confirm-color        | `#1989fa`                                                                                                                                                             |\n| --chook-picker-confirm-font-size    | `0.875rem`                                                                                                                                                            |\n| --chook-picker-confirm-padding      | `0 1rem 0 0`                                                                                                                                                          |\n| --chook-picker-cancel-color         | `#969799`                                                                                                                                                             |\n| --chook-picker-cancel-font-size     | `0.875rem`                                                                                                                                                            |\n| --chook-picker-cancel-padding       | `0 0 0 1rem`                                                                                                                                                          |\n| --chook-picker-active-opacity       | `0.6`                                                                                                                                                                 |\n| --chook-picker-columns-margin       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-columns-backdrop     | `linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 0.0625rem, transparent 0.0625rem, transparent calc(100% - 0.0625rem), #f2f2f2 calc(100% - 0.0625rem), #f2f2f2 100%)` |\n| --chook-picker-mask-backdrop        | `linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4)), linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))`              |\n| --chook-picker-column-label-color   | `#323233`                                                                                                                                                             |\n| --chook-picker-column-label-padding | `0 0.25rem`                                                                                                                                                           |\n| --chook-picker-column-font-size     | `1rem`                                                                                                                                                                |\n| --chook-picker-column-font-weight   | `500`                                                                                                                                                                 |\n",qe="### Installation\n\n::: group\n\n```bash [npm]\n$ npm install @component-hook/picker\n```\n\n```bash [yarn]\n$ yarn add @component-hook/picker\n```\n\n```bash [pnpm]\n$ pnpm install @component-hook/picker\n```\n\n:::\n";export{Re as D,_e as _,ze as a,Ye as b,je as c,Ae as d,Pe as e,Fe as f,Oe as g,xe as h,qe as i,$e as j,Ne as k,Le as l,He as m,Ue as n,Be as o,Xe as p};
