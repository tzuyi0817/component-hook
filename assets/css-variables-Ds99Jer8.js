import{d as R,i as oe,o as E,c as N,b as _,w as B,j,v as q,e as V,T as G,k as L,l as se,r as P,m as K,n as Z,p as ae,a as Y,F as X,q as ee,s as J,u as p,t as x,h as A,x as le,y as re,z as ie}from"./index-Bghl88EY.js";const ce=Array.isArray;function ue(e,t){if(ne(e))return"multiple";const[a]=e;return a!=null&&a[t.children]?"cascade":"single"}function fe(e){return{children:(e==null?void 0:e.children)||"children",label:(e==null?void 0:e.label)||"label",value:(e==null?void 0:e.value)||"value"}}function de(e,t,a){var c;if(ne(e))return[];const s=[];let o=e,n=0;for(;o;){const f=t[n];let g=te(o,f,a);g===-1&&(g=0),s.push(o),n+=1,o=(c=o[g])==null?void 0:c[a.children]}return s}function me(e,t,a,s){const o=[...a];let n=e,c=t+1;for(;n!=null&&n[s.children];){const f=n[s.children][0];o[c]=f.value,n=f,c+=1}return o}function te(e,t,a){return e.findIndex(s=>(s==null?void 0:s[a.value])===t)}function ne(e){const[t]=e;return ce(t)}function pe(e,t){return e>t?"horizontal":t>e?"vertical":""}function Oe(e,t,a){const s=[];for(let o=e;o<=t;o++){const n=a(`${o}`);s.push({label:n,value:o})}return s}function Pe(e,t){return e===t.getFullYear()}function Ae(e,t){return e===t.getFullYear()}function xe(e,t){return e===t.getMonth()+1}function Fe(e,t){return e===t.getMonth()+1}function $e(e,t){return new Date(e,t,0).getDate()}function Ne(e,t,a){const s=new Date,o=Date.now(),n=e.getTime(),c=t.getTime(),f=o>=n&&o<=c;return a==="year"?f?s.getFullYear():e.getFullYear():a==="month"?f?s.getMonth()+1:e.getMonth()+1:f?s.getDate():e.getDate()}function Be(e){return e}function ke(e){return/^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e)}function Le(e){if(!ke(e))return null;const[t,a,s]=e.split(":");return{hour:Number(t),minute:Number(a),second:Number(s)}}function Xe(e){return e.padStart(2,"0")}function ze(e,t,a){const s=Date.now(),{hour:o,minute:n,second:c}=e,{hour:f,minute:g,second:r}=t,v=new Date().setHours(o,n,c),T=new Date().setHours(f,g,r),S=s>=v&&s<=T;return a==="hour"?S?new Date().getHours():o:a==="minute"?S?new Date().getMinutes():n:S?new Date().getSeconds():c}const he={class:"chook-picker-container"},ve=R({__name:"Popup",props:{teleport:{default:"body"},modelValue:{type:Boolean}},emits:["update:modelValue","open","close","closed"],setup(e,{emit:t}){const a=e,s=t;return oe(()=>a.modelValue,o=>{o?(document.body.style.overflow="hidden",s("open")):(document.body.style.overflow="",s("close"))},{immediate:!0}),(o,n)=>(E(),N(se,{to:o.teleport},[_(G,{name:"chook-picker-fade"},{default:B(()=>[j(V("div",{class:"chook-picker-mask",onClick:n[0]||(n[0]=c=>o.$emit("update:modelValue",!1))},null,512),[[q,o.modelValue]])]),_:1}),_(G,{name:"chook-picker-slide",onAfterLeave:n[1]||(n[1]=c=>o.$emit("closed"))},{default:B(()=>[j(V("div",he,[L(o.$slots,"default")],512),[[q,o.modelValue]])]),_:3})],8,["to"]))}}),ge=16,z=48,Te=.52,Q=150,$=300,be=15,we=.008,W=5,Re="Select Date",Ue=["year","month","day"],He="Select Time",_e=["hour","minute","second"];function ye(){const e={startX:0,startY:0,deltaX:0,deltaY:0,offsetX:0,offsetY:0};let t="",a=!0;const s=()=>t==="vertical",o=()=>t==="horizontal";function n(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0,t="",a=!0}function c(r){const v="touches"in r?r.touches[0]:r;n(),e.startX=v.clientX,e.startY=v.clientY}function f(r){if(!e.startX||!e.startY)return!0;const v="touches"in r?r.touches[0]:r;e.deltaX=Math.max(v.clientX,0)-e.startX,e.deltaY=v.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY);const T=10;(!t||e.offsetX<T&&e.offsetY<T)&&(t=pe(e.offsetX,e.offsetY)),a&&(e.offsetX>W||e.offsetY>W)&&(a=!1)}function g(){e.startX=0,e.startY=0}return{pointer:e,move:f,start:c,stop:g,reset:n,isVertical:s,isHorizontal:o}}function De({column:e,onChange:t}){const s=Number.parseFloat(getComputedStyle(document.documentElement).fontSize)/ge,o=P(0),n=P(0),{pointer:c,start:f,move:g,stop:r}=ye();let v=0,T=0,S=0,D=!1,M=null;function b(u){f(u),D=!0,n.value=0,T=Date.now(),v=o.value,S=v,M=null}function d(u){if(g(u))return;const y=Z(e)?e.value.length:e.length,O=v+c.deltaY,F=k((y-1)*-48),U=Math.min(Math.max(O,F),0),H=Date.now();o.value=U,!(H-T<=$)&&(T=H,S=U)}function i(){r();const u=o.value-S,h=Date.now()-T;if(h<$&&Math.abs(u)>be){l(u,h);return}const y=I(o.value);n.value=Q,w(y),D=!1}function l(u,h){const y=Math.abs(u/h),O=o.value+y/we*(u<0?-1:1),F=I(O);n.value=$,w(F)}function m(){n.value=0,D=!1,M&&(M(),M=null)}function w(u){const h=-u*k(z),y=()=>t==null?void 0:t(u);D&&h!==o.value?M=y:y(),o.value=h}function I(u){const h=Z(e)?e.value.length:e.length,y=Math.round(-u/k(z));return y<0?0:y>=h?h-1:y}function k(u){return u*s}function C(u,h="auto"){D&&h==="smooth"||(M=null,D=h==="smooth",n.value=h==="smooth"?Q:0,w(u))}return{offsetY:K(o),transitionDuration:K(n),onPointerDown:b,onPointerMove:d,onPointerUp:i,stopInertialSliding:m,scrollToIndex:C}}const Ie=["onClick"],Se=R({__name:"PickerColumn",props:{column:{},fields:{},selectedIndex:{default:0}},emits:["change"],setup(e,{expose:t,emit:a}){const s=e,o=a,{offsetY:n,transitionDuration:c,onPointerDown:f,onPointerMove:g,onPointerUp:r,stopInertialSliding:v,scrollToIndex:T}=De({column:ae(s,"column"),onChange:S});function S(b){b!==s.selectedIndex&&o("change",b)}function D(b=s.selectedIndex,d){T(b,d)}function M(b){b!==s.selectedIndex&&D(b,"smooth")}return t({scrollToSelected:D}),(b,d)=>(E(),Y("div",{class:"chook-picker-column",onTouchstartPassive:d[1]||(d[1]=(...i)=>p(f)&&p(f)(...i)),onTouchmovePassive:d[2]||(d[2]=(...i)=>p(g)&&p(g)(...i)),onTouchendPassive:d[3]||(d[3]=(...i)=>p(r)&&p(r)(...i)),onTouchcancel:d[4]||(d[4]=(...i)=>p(r)&&p(r)(...i)),onMousedownPassive:d[5]||(d[5]=(...i)=>p(f)&&p(f)(...i)),onMousemovePassive:d[6]||(d[6]=(...i)=>p(g)&&p(g)(...i)),onMouseupPassive:d[7]||(d[7]=(...i)=>p(r)&&p(r)(...i))},[V("ul",{style:J({overflowY:"hidden",transform:`translate3d(0, ${p(n)}px, 0)`,transitionDuration:`${p(c)}ms`,transitionProperty:p(c)?"all":"none"}),onTransitionend:d[0]||(d[0]=(...i)=>p(v)&&p(v)(...i))},[(E(!0),Y(X,null,ee(b.column,(i,l)=>(E(),Y("li",{key:i==null?void 0:i[b.fields.value],class:"chook-picker-column-item",role:"button",tabindex:"0",onClick:m=>M(l)},[V("p",{class:"chook-picker-column-label",style:J({transform:`rotate3d(1, 0, 0, ${(l*p(z)+p(n))*p(Te)}deg)`})},x(i==null?void 0:i[b.fields.label]),5)],8,Ie))),128))],36)],32))}}),Me={class:"chook-picker-header"},Ve={class:"chook-picker-title"},Ce={class:"chook-picker-loading"},Ee={key:1,class:"chook-picker-columns"},je=R({__name:"Picker",props:{show:{type:Boolean},modelValue:{},title:{},columns:{},linkage:{type:Boolean},loading:{type:Boolean},teleport:{},confirmButtonText:{default:"Confirm"},cancelButtonText:{default:"Cancel"},columnsFieldNames:{}},emits:["update:show","update:modelValue","confirm","cancel","open","closed"],setup(e,{emit:t}){const a=e,s=t,o=P([]),n=P([]),c=P([]),f=P(null),g=A({get:()=>a.show,set:l=>s("update:show",l)}),r=A(()=>fe(a.columnsFieldNames)),v=A(()=>ue(a.columns,r.value)),T=A(()=>{const{columns:l}=a;return v.value==="single"?[l]:v.value==="multiple"?l:de(l,n.value,r.value)});function S(l,m){var u;const w=T.value[l],I=(u=w[m])==null?void 0:u[r.value.value],k=n.value[l];if(I===k)return;const C=[...n.value];if(C[l]=I,v.value==="cascade"){const h=w[m];n.value=me(h,l,C,r.value)}else n.value=C;a.linkage&&D()}function D(){s("update:modelValue",n.value),o.value=n.value}function M(){s("update:show",!1)}async function b(){s("open"),await ie(),n.value=a.modelValue?[...a.modelValue]:[...o.value]}function d(){a.linkage||D(),M(),s("confirm",n.value)}function i(){M(),s("cancel")}return le(()=>{var w,I;const l=T.value.length,m=[];for(let k=0;k<l;k++){const C=T.value[k],u=n.value[k],h=te(C,u,r.value);if(h===-1){const O=(c.value[k]??0)>=C.length?Math.max(C.length-1,0):0;n.value[k]=(w=C[O])==null?void 0:w[r.value.value],m[k]=O}else m[k]=h;m[k]!==c.value[k]&&((I=f.value)==null||I[k].scrollToSelected(m[k]))}c.value=m}),(l,m)=>(E(),N(ve,{modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=w=>g.value=w),teleport:l.teleport,onOpen:b,onClosed:m[2]||(m[2]=w=>l.$emit("closed"))},{default:B(()=>[V("div",Me,[V("button",{class:"chook-picker-cancel",onClick:i},x(l.cancelButtonText),1),V("p",Ve,x(l.title),1),V("button",{class:"chook-picker-confirm",onClick:d},x(l.confirmButtonText),1)]),l.loading?(E(),Y(X,{key:0},[V("div",Ce,[L(l.$slots,"loading")]),m[3]||(m[3]=V("div",{class:"chook-picker-columns"},null,-1))],64)):l.columns.length?(E(),Y("div",{key:2,class:"chook-picker-columns chook-picker-columns-backdrop",onTouchmove:m[0]||(m[0]=re(()=>{},["stop"]))},[(E(!0),Y(X,null,ee(T.value,(w,I)=>(E(),N(Se,{key:I,ref_for:!0,ref_key:"columnsRef",ref:f,column:w,fields:r.value,"selected-index":c.value[I],onChange:k=>S(I,k)},null,8,["column","fields","selected-index","onChange"]))),128)),m[4]||(m[4]=V("div",{class:"chook-picker-mask-backdrop"},null,-1))],32)):(E(),Y("div",Ee,[L(l.$slots,"empty")]))]),_:3},8,["modelValue","teleport"]))}}),qe="### Installation\n\n::: group\n\n```bash [npm]\n$ npm install @component-hook/picker\n```\n\n```bash [yarn]\n$ yarn add @component-hook/picker\n```\n\n```bash [pnpm]\n$ pnpm install @component-hook/picker\n```\n\n:::\n",Ge="#### CSS Variables\n\n| Name                                | Default Value                                                                                                                                                         |\n| :---------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| --chook-picker-background           | `#fff`                                                                                                                                                                |\n| --chook-picker-border-radius        | `0.5rem`                                                                                                                                                              |\n| --chook-picker-padding-bottom       | `1.25rem`                                                                                                                                                             |\n| --chook-picker-z-index              | `2147483646`                                                                                                                                                          |\n| --chook-picker-mask-background      | `rgba(0, 0, 0, 0.2)`                                                                                                                                                  |\n| --chook-picker-header-padding       | `0.75rem 0`                                                                                                                                                           |\n| --chook-picker-header-margin-bottom | `1.25rem`                                                                                                                                                             |\n| --chook-picker-title-font-size      | `1rem`                                                                                                                                                                |\n| --chook-picker-title-font-weight    | `500`                                                                                                                                                                 |\n| --chook-picker-title-color          | `#323233`                                                                                                                                                             |\n| --chook-picker-confirm-color        | `#1989fa`                                                                                                                                                             |\n| --chook-picker-confirm-font-size    | `0.875rem`                                                                                                                                                            |\n| --chook-picker-confirm-padding      | `0 1rem`                                                                                                                                                              |\n| --chook-picker-cancel-color         | `#969799`                                                                                                                                                             |\n| --chook-picker-cancel-font-size     | `0.875rem`                                                                                                                                                            |\n| --chook-picker-cancel-padding       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-active-opacity       | `0.6`                                                                                                                                                                 |\n| --chook-picker-columns-margin       | `0 1rem`                                                                                                                                                              |\n| --chook-picker-columns-backdrop     | `linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 0.0625rem, transparent 0.0625rem, transparent calc(100% - 0.0625rem), #f2f2f2 calc(100% - 0.0625rem), #f2f2f2 100%)` |\n| --chook-picker-mask-backdrop        | `linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4)), linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))`              |\n| --chook-picker-column-label-color   | `#323233`                                                                                                                                                             |\n| --chook-picker-column-label-padding | `0 0.25rem`                                                                                                                                                           |\n| --chook-picker-column-font-size     | `1rem`                                                                                                                                                                |\n| --chook-picker-column-font-weight   | `500`                                                                                                                                                                 |\n";export{Re as D,je as _,Ue as a,Oe as b,Ge as c,Pe as d,Ae as e,Be as f,Ne as g,xe as h,qe as i,Fe as j,$e as k,He as l,_e as m,Xe as n,Le as o,ze as p};
