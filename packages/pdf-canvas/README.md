# @component-hook/pdf-canvas

Rendering PDF documents onto a canvas with vue3 component ([DEMO](https://tzuyi0817.github.io/component-hook/#/pdf-canvas))

<p>
  <a href="https://npm-stat.com/charts.html?package=@component-hook/pdf-canvas">
    <img src="https://img.shields.io/npm/dm/@component-hook/pdf-canvas.svg" alt="npm"/>
  </a>
  <a href="https://www.npmjs.com/package/@component-hook/pdf-canvas">
    <img src="https://img.shields.io/npm/v/@component-hook/pdf-canvas.svg" alt="npm"/>
  </a>
</p>

## Features

- Rendering PDF documents onto a canvas
- Open encrypted PDF files
- Drag and drop the images and text onto the canvas
- Manually add the images and text onto the canvas
- Supports typescript

## Installation

First step is to install it using `yarn`、`npm` or `pnpm`:

```bash
npm install @component-hook/pdf-canvas

# or use yarn
yarn add @component-hook/pdf-canvas

# or use pnpm
pnpm install @component-hook/pdf-canvas
```

## Basic Usage

```vue
<script setup lang="ts">
import { ref } from 'vue';
import PdfCanvas, { useFabric, type PDF } from '@component-hook/pdf-canvas';

const { loadFile } = useFabric();
const currentPdf = ref<PDF>();

async function uploadFile(event: Event) {
  const target = event.target as HTMLInputElement;
  const { files } = target;

  if (!files) return;
  const file = files[0];
  const content = await loadFile(file);

  currentPdf.value = content;
  target.value = '';
}
</script>

<template>
  <div class="w-fit flex flex-col items-center gap-3">
    <pdf-canvas
      v-if="currentPdf"
      :file="currentPdf"
    />

    <p
      v-else
      class="font-mono text-sm"
    >
      Please select a PDF file or image.
    </p>

    <button class="relative">
      <input
        type="file"
        accept="application/pdf, .jpg, .png"
        class="opacity-0 top-0 left-0 absolute w-[94px] h-[36px] cursor-pointer"
        @change="uploadFile"
      />
      select file
    </button>
  </div>
</template>
```

## Attributes

| Name             | Required | Type      | Description                                                            | Default    |
| ---------------- | -------- | --------- | ---------------------------------------------------------------------- | ---------- |
| file             | true     | `PDF`     | The data is generated by loadFile of useFabric hook                    | —          |
| page             | false    | `number`  | The page number you want to display                                    | 1          |
| canvasId         | false    | `string`  | Canvas dom prefix id selector - `${canvasId}-${page - 1}`              | PDF-canvas |
| fileZoom         | false    | `number`  | Zoom in and out of the displayed canvas                                | 1          |
| fileScale        | false    | `number`  | The actual size of the canvas will affect the display clarity          | 1          |
| canvasClass      | false    | `string`  | Canvas dom class selector                                              | —          |
| isDrop           | false    | `boolean` | Control whether to drag and drop images and text onto the canvas       | false      |
| password         | false    | `string`  | Open password for encrypted PDF files                                  | -          |
| dropTextOptions  | false    | `object`  | [fabric.js FabricText options](https://github.com/fabricjs/fabric.js)  | -          |
| dropImageOptions | false    | `object`  | [fabric.js FabricImage options](https://github.com/fabricjs/fabric.js) | -          |

## Exposes

| Event        | Description                             | Type          |
| :----------- | :-------------------------------------- | :------------ |
| addImage     | Manually add the images onto the canvas | `Function`    |
| addText      | Manually add the text onto the canvas   | `Function`    |
| clearActive  | Manually deactivate status              | `Function`    |
| deleteCanvas | Delete the current canvas               | `Function`    |
| canvasDom    | The current canvas dom element          | `element ref` |
